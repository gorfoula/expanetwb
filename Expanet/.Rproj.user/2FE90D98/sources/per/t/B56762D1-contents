#
# This is the user-interface definition of a Shiny web application. You can
# run the application by clicking 'Run App' above.
#
# Find out more about building applications with Shiny here:
# 
#    http://shiny.rstudio.com/
#

#library(shiny)
#library(shinydashboard)
#library(shinyjs)

# Define UI for application that draws a histogram
title<-tags$a(href="www.google.gr",tags$img(src='Expanet_logo.png',height='40',width='160')) 
shinyUI(
  
  dashboardPage(skin = "black",
    dashboardHeader(title = title, titleWidth = 200),
    dashboardSidebar(
      sidebarSearchForm(textId = "searchText", buttonId = "searchButton",
                        label = "Search..."),
      sidebarMenu(id = "sidebar",
                  menuItem("Load your data", tabName = "dselection", icon = icon("database")),
                  menuItem("Results", tabName = "results", icon = icon("database")),
                  menuItem("About", tabName = "help_page", icon = icon("database")),
                  menuItem("Examples",tabName = "example_page",icon = icon("book"))
                  #menuItemOutput("menu.quant"),
      )
    ),
    dashboardBody(
      tags$head(tags$link(rel = "stylesheet", type = "text/css", href = "app.css")),
      tabItems(
        tabItem(tabName = "dselection",
                fluidRow(
                  column(width = 12,
                         box(title = "PROGRESS",status = "success",
                             width = NULL,
                             #p(strong("Goal Completion"), class = "text-center"),
                             uiOutput(outputId = "progressOne"),
                             uiOutput(outputId = "progressTwo")
                             #uiOutput(outputId = "progressThree")
                             )
                         )
                  ),
                fluidRow(
                  column(width = 4,
                         box(title = "STEP1: Control experiment",
                             status = "primary",
                             width = NULL,
                             solidHeader = TRUE,
                             collapsible = TRUE,
                             helpText("Provide square transition and adjacency matrices."),
                             fileInput("file1", "Choose CSV File",
                                       multiple = FALSE,
                                       accept = c("text/csv",
                                                  "text/comma-separated-values,text/plain",
                                                  ".csv")
                                       ),
                             helpText("Provide an experiment name."),
                             textInput("label1", "Label",value = "Control"),
                             helpText("Specify the type of matrix you want to submit"),
                             div(style="display: inline-block;vertical-align:top;margin-top: 1px",
                                 radioButtons("matrix.step1", "Matrix type",
                                              choices = c("Transition" = "T",
                                                          "Adjacency" = 'A'),
                                              selected = "T")   
                             ),
                             useShinyjs(),
                             div(style="display: block;vertical-align:top;margin-top: 1px",
                                 actionButton(inputId = "add.button1", label = "Add!")
                             )
                             
                         )
                  ),
                  column(width = 4,
                         box(title = "STEP2: Treatment Experiment",
                             status = "info",
                             width = NULL,
                             solidHeader = TRUE,collapsible = TRUE,
                             helpText("Provide square transition and adjacency matrices."),
                             fileInput("file2", "Choose CSV File",
                                       multiple = FALSE,
                                       accept = c("text/csv",
                                                  "text/comma-separated-values,text/plain",
                                                  ".csv")
                             ),
                             helpText("Provide an experiment name."),
                             textInput("label2", "Label",value = "Treated"),
                             helpText("Specify the type of matrix you want to submit"),
                             div(style="display: inline-block;vertical-align:top;margin-top: 1px",
                                 radioButtons("matrix.step2", "Matrix type",
                                              choices = c("Transition" = "T",
                                                          "Adjacency" = 'A'),
                                              selected = "T")   
                             ),
                             useShinyjs(),
                             div(style="display: block;vertical-align:top;margin-top: 1px",
                                 actionButton(inputId = "add.button2", label = "Add!")
                                 )
                             )
                         )
                  ,
                  column(width = 4,
                         box(title = "STEP3: Gene Set",
                             status = "warning",
                             width = NULL,
                             solidHeader = TRUE,collapsible = TRUE,
                             helpText("Select Organism"),
                             uiOutput("choose.organism"),
                             textOutput("num.paths")
                             ),
                         box(title = "STEP4: Submit your Job",
                             width = NULL,
                             solidHeader = TRUE,collapsible = TRUE,
                             background = "olive",
                             useShinyjs(),
                             div(style="display: inline-block;vertical-align:top; margin-top: 8px;width: 100%;"
                                 ,actionButton(inputId = "submit.button"
                                               , label = "Submit")
                                 )
                             ),
                         box(title = "STEP5: Bookmark your job",
                             width = NULL,
                             solidHeader = TRUE,collapsible = TRUE,
                             background = "teal",
                             helpText("Expanet analysis might take days to complete. Press the Bookmark button and save the displayed url. Use this url to monitor the progress of the analysis."),
                             div(style="display: inline-block;vertical-align:top; margin-top: 8px;width: 100%;"
                                 ,bookmarkButton()
                                 )
                             )
                         )
                  )
        ),
        tabItem(tabName = "results",
                fluidRow(
                  tabBox(
                    title = tagList(shiny::icon("table"), "Results"),
                    # The id lets us use input$tabset1 on the server to find the current tab
                    id = "tabset1", height = "400px",width = 12,
                    tabPanel("Status",
                             box(title = "Monitor the status of the analysis.",status = "info"
                                 ,width=NULL,solidHeader = TRUE,
                                 div(style="display: inline-block;vertical-align:top; margin-top: 8px;width: 100%;"
                                     ,actionButton(inputId = "status.button"
                                                   , label = "Check Status")
                                     ),
                                 div(style="display: inline-block;vertical-align:top; margin-top: 8px;width: 100%;"
                                     ,
                                     textOutput("statusmsg")
                                 ),
                                 div(style="display: inline-block;vertical-align:top; margin-top: 8px;width: 100%;"
                                     ,infoBoxOutput("controlProgress")
                                     )
                                 )
                             ),
                    tabPanel("Score Table",
                             box(title = "",status = "info"
                                 ,width=NULL,solidHeader = TRUE
                                 )
                             ),
                    tabPanel("Networks", "Tab content 2"),
                    tabPanel("Download", "Tab content 3")
                  )
                )
        ),
        tabItem(tabName = "help_page",
                fluidRow(
                  h2("About Expanet")
                  
                )
        ),
        tabItem(tabName = "example_page",
                fluidRow(
                  h2("Example Results")
                  
                )
        )
        
      ),tags$style("#controlProgress {width:300px;}")
    )
  )

)
